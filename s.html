<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nursing Schedule Generator</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: center; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <h2>Nursing Schedule Generator</h2>
    <label for="days">Enter the number of days for the schedule:</label>
    <input type="number" id="days" min="1" max="31" placeholder="Enter days">
    <button onclick="generateSchedule()">Generate Schedule</button>

    <table id="schedule-table">
        <thead>
            <tr>
                <th>Day</th>
                <th>Staff</th>
                <th>Shift</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        function generateSchedule() {
            const days = parseInt(document.getElementById('days').value);
            if (isNaN(days) || days < 1 || days > 31) {
                alert("Please enter a valid number of days between 1 and 31.");
                return;
            }

            const tableBody = document.querySelector('#schedule-table tbody');
            tableBody.innerHTML = '';  // Clear previous schedule

            // Sample staff list, replace with actual staff names if available
            const staff = ['Nurse 1', 'Nurse 2', 'Nurse 3', 'Nurse 4'];
            const shifts = ['Day', 'Night'];  // 12-hour shifts
            const schedule = [];
            const maxWeeklyHours = 48;
            const shiftsPerStaff = 18;
            
            let dayCount = 1;
            for (let i = 0; i < staff.length; i++) {
                let workedHours = 0;
                let shiftType = 'Day';

                for (let j = 0; j < days; j++) {
                    if (workedHours >= maxWeeklyHours) break;

                    // Assign shift and alternate day/night
                    if (j % 2 === 0) {
                        shiftType = 'Day';
                    } else {
                        shiftType = 'Night';
                    }

                    // Apply off-duty rules based on shift change
                    if (shiftType === 'Night' && dayCount % 3 === 0) {
                        schedule.push({ day: dayCount, staff: staff[i], shift: 'Off Duty' });
                    } else if (shiftType === 'Day' && dayCount % 4 === 0) {
                        schedule.push({ day: dayCount, staff: staff[i], shift: 'Off Duty' });
                    } else {
                        schedule.push({ day: dayCount, staff: staff[i], shift: shiftType });
                        workedHours += 12;
                    }

                    dayCount++;
                    if (dayCount > days) break;
                }
            }

            // Render schedule
            schedule.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `<td>${item.day}</td><td>${item.staff}</td><td>${item.shift}</td>`;
                tableBody.appendChild(row);
            });
        }
    </script>
</body>
</html>